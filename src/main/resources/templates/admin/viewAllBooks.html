<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>흑백문고 - 도서 목록</title>
    <!-- 기존 스타일 시트 유지 -->
    <link rel="stylesheet" href="/css/style.css">
    <style>
        /* 도서 목록 테이블 스타일 */
        .table-responsive {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            /* 테이블 레이아웃을 auto로 설정하여 열 너비가 내용에 따라 조정되도록 함 */
            table-layout: auto;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
            /* 텍스트가 셀 너비를 넘어갈 경우 줄바꿈 되도록 함 */
            word-wrap: break-word;
            /* 긴 단어로 인해 테이블이 깨지는 것을 방지 */
            word-break: break-all;
        }
        th {
            background-color: #333;
            color: #fff;
        }
        tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tbody tr:hover {
            background-color: #f1f1f1;
        }
        .no-results {
            text-align: center;
            padding: 20px;
            font-style: italic;
            color: #555;
        }
        .add-book-button {
            padding: 10px 20px;
            background-color: #2980b9;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            text-decoration: none;
            margin: 20px 0;
            display: inline-block;
        }
        .add-book-button:hover {
            background-color: #333;
        }
        .action-button {
            padding: 8px 16px;
            background-color: #000;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 5px;
        }
        .action-button:hover {
            background-color: #333;
        }
        .action-buttons {
            display: flex;
            flex-direction: column;
        }
        .edit-button {
            /* 수정 버튼 추가 스타일이 필요하면 여기에 작성 */
        }
        .delete-button {
            /* 삭제 버튼 추가 스타일이 필요하면 여기에 작성 */
        }
        .detail-button {
            /* 상세보기 버튼 스타일 */
        }
        /* 반응형 디자인 */
        @media (max-width: 768px) {
            .action-buttons {
                flex-direction: row;
                flex-wrap: wrap;
            }
            .action-button {
                margin-right: 5px;
            }
        }
    </style>
</head>
<body>
<!-- 헤더 -->
<header>
    <a href="/">
        <img src="/images/logo.png" alt="흑백문고 로고" class="logo">
    </a>
    <h1>흑백문고</h1>
    <nav>
        <ul>
            <li><a href="/">홈</a></li>
            <li><a href="/categories">카테고리</a></li>
            <li><a href="/cart">장바구니</a></li>
            <li><a href="/login">로그인</a></li>
            <li><a href="/mypage">마이페이지</a></li>
        </ul>
    </nav>
</header>

<!-- "도서 추가하기" 버튼 -->
<section style="text-align: center;">
    <a th:href="@{/admins/books/register}" class="add-book-button">직접 등록하기</a>
</section>

<!-- 도서 목록 -->
<section class="results-section" th:if="${books != null}">
    <h2>도서 목록</h2>
    <div class="table-responsive">
        <table>
            <thead>
            <tr>
                <th>표지</th>
                <th>제목</th>
                <th>저자</th>
                <th>카테고리</th>
                <th>출판사</th>
                <th>출판일</th>
                <th>재고</th>
                <th>정가</th>
                <th>할인율(%)</th>
                <th>ISBN</th>
                <th>도서 상태</th>
                <th>태그</th>
                <th>관리</th>
            </tr>
            </thead>
            <tbody>
            <tr th:if="${books.isEmpty()}">
                <td colspan="13" class="no-results">등록된 도서가 없습니다.</td>
            </tr>
            <tr th:each="book : ${books}">
                <td>
                    <img th:src="@{${book.imageUrl}}" alt="No image" style="width:100px; height:auto;">
                </td>
                <td th:text="${book.title}">제목</td>
                <td th:text="${#strings.arrayJoin(book.authors, ', ')}">저자</td>
                <td th:text="${#strings.arrayJoin(book.categories, ', ')}">카테고리</td>
                <td th:text="${book.publisher}">출판사</td>
                <td th:text="${book.publication}">출판일</td>
                <td th:text="${book.stock}">재고</td>
                <td th:text="${book.standardPrice}">정가</td>
                <td th:text="${book.discountRate}">할인율</td>
                <td th:text="${book.isbn}">ISBN</td>
                <td>
                    <span th:switch="${book.bookStatus}">
                        <span th:case="'IN_STOCK'">재고 있음</span>
                        <span th:case="'OUT_OF_STOCK'">품절</span>
                        <span th:case="'DISCONTINUED'">절판</span>
                        <span th:case="'DELETED'">삭제</span>
                        <span th:case="*">알 수 없음</span>
                    </span>
                </td>
                <td th:text="${#strings.arrayJoin(book.tags, ', ')}">도서 태그</td>
                <td>
                    <!-- 관리 버튼들 -->
                    <div class="action-buttons">
                        <a th:href="@{/admins/books/{bookId}(bookId=${book.id})}" class="action-button edit-button">수정</a>
                        <form th:action="@{/admins/books/{bookId}/delete(bookId=${book.id})}" method="post" style="display:inline;">
                            <input type="hidden" name="page" th:value="${page}"/>
                            <input type="hidden" name="size" th:value="${size}"/>
                            <input type="hidden" name="sort" th:value="${sort}"/>
                            <button type="submit" class="action-button delete-button">삭제</button>
                        </form>
                        <a th:href="@{/books/{bookId}(bookId=${book.id})}" class="action-button detail-button">상세보기</a>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</section>

<!-- 푸터 -->
<footer>
    <p>&copy; 2024 흑백문고</p>
    <nav>
        <a href="/about">회사 소개</a> |
        <a href="/contact">문의하기</a> |
        <a href="/terms">이용 약관</a>
    </nav>
</footer>
</body>
</html>
